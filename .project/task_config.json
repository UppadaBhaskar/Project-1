{
  "project": {
    "name": "College Management System",
    "version": "2.0.0",
    "description": "Flask-based student management with 4 progressive tasks"
  },
  "tasks": [
    {
      "id": "task1-foundation",
      "name": "Task 1: Database & Structure",
      "description": "Set up database schema, Flask app structure, and basic routing",
      "points": 25,
      "status": "active",
      "requirements": [
        "Create SQLite database with faculty and student tables",
        "Implement database connection function",
        "Define Flask app with routes",
        "Add basic HTML templates structure"
      ],
      "validation": {
        "minScore": 70,
        "static": {
          "required": true,
          "python": {
            "rules": [
              {
                "file": "app.py",
                "points": 15,
                "requiredPatterns": [
                  {
                    "pattern": "CREATE\\s+TABLE\\s+.*faculty",
                    "flags": "i",
                    "description": "Creates faculty table"
                  },
                  {
                    "pattern": "CREATE\\s+TABLE\\s+.*student",
                    "flags": "i",
                    "description": "Creates student table"
                  },
                  {
                    "pattern": "def\\s+get_db_connection",
                    "description": "Has database connection function"
                  },
                  {
                    "pattern": "@app\\.route",
                    "description": "Defines Flask routes"
                  },
                  {
                    "pattern": "render_template",
                    "description": "Uses template rendering"
                  }
                ]
              }
            ]
          },
          "html": {
            "rules": [
              {
                "file": "templates/base.html",
                "points": 5,
                "requiredElements": ["html", "head", "body", "title"]
              },
              {
                "file": "templates/login.html",
                "points": 5,
                "requiredElements": ["form", "input", "button"]
              }
            ]
          }
        }
      }
    },
    {
      "id": "task2-authentication",
      "name": "Task 2: Authentication System",
      "description": "Implement complete login/register flow with validation",
      "points": 30,
      "status": "locked",
      "unlockConditions": {
        "prerequisite": "task1-foundation",
        "minScore": 70
      },
      "requirements": [
        "Implement login route with POST handling",
        "Implement register route with validation",
        "Add flash messages for feedback",
        "Style authentication forms",
        "Test login/register flow end-to-end"
      ],
      "validation": {
        "minScore": 70,
        "static": {
          "required": true,
          "python": {
            "rules": [
              {
                "file": "app.py",
                "points": 10,
                "requiredPatterns": [
                  {
                    "pattern": "def\\s+login",
                    "description": "Login function exists"
                  },
                  {
                    "pattern": "def\\s+register",
                    "description": "Register function exists"
                  },
                  {
                    "pattern": "flash\\(",
                    "description": "Uses flash messages"
                  }
                ]
              }
            ]
          },
          "css": {
            "rules": [
              {
                "file": "static/style.css",
                "points": 5,
                "requiredSelectors": [".auth-container", ".auth-box", ".btn-primary"]
              }
            ]
          }
        },
        "dynamic": {
          "required": true,
          "requiresFlask": true,
          "flaskConfig": {
            "appPath": "app.py",
            "port": 5000,
            "startupTimeout": 15000
          },
          "baseUrl": "http://localhost:5000",
          "tests": [
            {
              "name": "Login page loads with form",
              "path": "/login",
              "points": 5,
              "captureScreenshot": true,
              "actions": [],
              "assertions": [
                {"type": "visible", "selector": "form"},
                {"type": "exists", "selector": "input[name='username']"},
                {"type": "exists", "selector": "input[name='password']"}
              ]
            },
            {
              "name": "Invalid login shows error",
              "path": "/login",
              "points": 5,
              "captureScreenshot": true,
              "actions": [
                {"type": "fill", "selector": "input[name='username']", "value": "wronguser"},
                {"type": "fill", "selector": "input[name='password']", "value": "wrongpass"},
                {"type": "click", "selector": "button[type='submit']"},
                {"type": "wait", "duration": 2000}
              ],
              "assertions": [
                {"type": "url", "value": "/login"}
              ]
            },
            {
              "name": "Valid login redirects to home",
              "path": "/login",
              "points": 5,
              "captureScreenshot": true,
              "actions": [
                {"type": "fill", "selector": "input[name='username']", "value": "abc"},
                {"type": "fill", "selector": "input[name='password']", "value": "abc123"},
                {"type": "click", "selector": "button[type='submit']"},
                {"type": "wait", "duration": 2000}
              ],
              "assertions": [
                {"type": "url", "value": "/home"}
              ]
            }
          ]
        }
      }
    },
    {
      "id": "task3-student-crud",
      "name": "Task 3: Student CRUD Operations",
      "description": "Create, Read, Update, Delete student records",
      "points": 40,
      "status": "locked",
      "unlockConditions": {
        "prerequisite": "task2-authentication",
        "minScore": 70
      },
      "requirements": [
        "Display student list in table",
        "Implement create student form with modal",
        "Implement student profile view",
        "Implement edit student functionality",
        "Add JavaScript for modal interactions"
      ],
      "validation": {
        "minScore": 70,
        "static": {
          "required": true,
          "html": {
            "rules": [
              {
                "file": "templates/home.html",
                "points": 5,
                "requiredElements": ["table", "thead", "tbody"]
              },
              {
                "file": "templates/create_student.html",
                "points": 5,
                "requiredElements": ["form", "input"]
              }
            ]
          },
          "javascript": {
            "rules": [
              {
                "file": "static/script.js",
                "points": 10,
                "requiredFunctions": ["showDeleteModal"],
                "requiredPatterns": [
                  {
                    "pattern": "addEventListener",
                    "description": "Has event listeners"
                  }
                ]
              }
            ]
          }
        },
        "dynamic": {
          "required": true,
          "requiresFlask": true,
          "flaskConfig": {
            "appPath": "app.py",
            "port": 5000,
            "startupTimeout": 15000
          },
          "baseUrl": "http://localhost:5000",
          "tests": [
            {
              "name": "Student list displays data",
              "path": "/home",
              "points": 5,
              "captureScreenshot": true,
              "actions": [],
              "assertions": [
                {"type": "visible", "selector": "table.student-table"},
                {"type": "count", "selector": "th", "value": 4}
              ]
            },
            {
              "name": "Create student form works",
              "path": "/create_student",
              "points": 5,
              "captureScreenshot": true,
              "actions": [
                {"type": "fill", "selector": "input[name='roll_number']", "value": "VAL123"},
                {"type": "fill", "selector": "input[name='student_name']", "value": "Validation Test"},
                {"type": "fill", "selector": "input[name='email']", "value": "val@test.com"},
                {"type": "fill", "selector": "input[name='phone_number']", "value": "9999999999"},
                {"type": "click", "selector": "button[type='submit']"},
                {"type": "wait", "duration": 1000}
              ],
              "assertions": [
                {"type": "visible", "selector": "#confirmModal"}
              ]
            },
            {
              "name": "Modal confirmation creates student",
              "path": "/create_student",
              "points": 5,
              "captureScreenshot": true,
              "actions": [
                {"type": "fill", "selector": "input[name='roll_number']", "value": "NEW999"},
                {"type": "fill", "selector": "input[name='student_name']", "value": "New Student"},
                {"type": "fill", "selector": "input[name='email']", "value": "new@test.com"},
                {"type": "fill", "selector": "input[name='phone_number']", "value": "8888888888"},
                {"type": "click", "selector": "button[type='submit']"},
                {"type": "wait", "duration": 1000},
                {"type": "click", "selector": "#confirmBtn"},
                {"type": "wait", "duration": 2000}
              ],
              "assertions": [
                {"type": "url", "value": "/home"}
              ]
            }
          ]
        }
      }
    },
    {
      "id": "task4-complete-system",
      "name": "Task 4: Complete System Integration",
      "description": "Full end-to-end workflow with styling and error handling",
      "points": 45,
      "status": "locked",
      "unlockConditions": {
        "prerequisite": "task3-student-crud",
        "minScore": 70
      },
      "requirements": [
        "All CRUD operations functional",
        "Modal animations and confirmations working",
        "Professional CSS styling with gradients",
        "Flash messages auto-hide",
        "Complete user workflow from login to delete"
      ],
      "validation": {
        "minScore": 80,
        "static": {
          "required": true,
          "css": {
            "rules": [
              {
                "file": "static/style.css",
                "points": 10,
                "requiredSelectors": [
                  ".modal",
                  ".modal-content",
                  ".flash-message",
                  ".btn-yes",
                  ".btn-no"
                ],
                "requiredProperties": [
                  {"property": "animation"},
                  {"property": "background"},
                  {"property": "transition"}
                ]
              }
            ]
          }
        },
        "dynamic": {
          "required": true,
          "requiresFlask": true,
          "flaskConfig": {
            "appPath": "app.py",
            "port": 5000,
            "startupTimeout": 15000
          },
          "baseUrl": "http://localhost:5000",
          "tests": [
            {
              "name": "Complete workflow: Login → Create → View",
              "path": "/login",
              "points": 15,
              "captureScreenshot": true,
              "actions": [
                {"type": "fill", "selector": "input[name='username']", "value": "abc"},
                {"type": "fill", "selector": "input[name='password']", "value": "abc123"},
                {"type": "click", "selector": "button[type='submit']"},
                {"type": "wait", "duration": 2000},
                {"type": "navigate", "url": "http://localhost:5000/create_student"},
                {"type": "wait", "duration": 1000},
                {"type": "fill", "selector": "input[name='roll_number']", "value": "E2E001"},
                {"type": "fill", "selector": "input[name='student_name']", "value": "E2E Student"},
                {"type": "fill", "selector": "input[name='email']", "value": "e2e@test.com"},
                {"type": "fill", "selector": "input[name='phone_number']", "value": "7777777777"},
                {"type": "click", "selector": "button[type='submit']"},
                {"type": "wait", "duration": 1000},
                {"type": "click", "selector": "#confirmBtn"},
                {"type": "wait", "duration": 3000}
              ],
              "assertions": [
                {"type": "url", "value": "/home"},
                {"type": "text", "selector": "body", "value": "E2E Student"}
              ]
            },
            {
              "name": "Profile page shows complete data",
              "path": "/student/AB23",
              "points": 10,
              "captureScreenshot": true,
              "actions": [],
              "assertions": [
                {"type": "visible", "selector": ".profile-card"},
                {"type": "visible", "selector": ".field-label"},
                {"type": "text", "selector": ".profile-card", "value": "Manu"}
              ]
            },
            {
              "name": "Edit updates student data",
              "path": "/student/AB23/edit",
              "points": 10,
              "captureScreenshot": true,
              "actions": [
                {"type": "fill", "selector": "input[name='section']", "value": "Z"},
                {"type": "click", "selector": "button[type='submit']"},
                {"type": "wait", "duration": 2000}
              ],
              "assertions": [
                {"type": "url", "value": "/home"}
              ]
            }
          ]
        }
      }
    }
  ]
}

